<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ğŸ¡ KK Homestay</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <h1>ğŸ¡ KK Homestay</h1>
  <nav>
    <a href="signup.html">Signup</a>
    <a href="login.html">Login</a>
    <a href="admin.html">Admin</a>
  </nav>
</header>

<section>
<h2>Explore Homestays</h2>
<div class="carousel">
  <div class="carousel-images" id="carousel-images"></div>
  <div class="carousel-buttons">
    <button onclick="prevSlide()">â€¹</button>
    <button onclick="nextSlide()">â€º</button>
  </div>
</div>
</section>

<script>
const API_BASE="https://kk-homestay-backend.onrender.com";
let currentIndex=0;
let images=[];

async function loadCarousel(){
    const res=await fetch(`${API_BASE}/homestays`);
    const data=await res.json();
    images=[];
    data.forEach(h=>{
        if(h.images) images.push(...h.images);
    });
    const container=document.getElementById("carousel-images");
    container.innerHTML="";
    images.forEach((img,i)=>{
        const el=document.createElement("img");
        el.src=img;
        if(i===0) el.classList.add("active");
        container.appendChild(el);
    });
}

function showSlide(index){
    const imgs=document.querySelectorAll(".carousel-images img");
    imgs.forEach(img=>img.classList.remove("active"));
    if(imgs[index]) imgs[index].classList.add("active");
}

function prevSlide(){
    currentIndex=(currentIndex-1+images.length)%images.length;
    showSlide(currentIndex);
}

function nextSlide(){
    currentIndex=(currentIndex+1)%images.length;
    showSlide(currentIndex);
}

loadCarousel();
</script>
</body>
</html>
