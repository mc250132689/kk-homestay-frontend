<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ðŸ’³ Payment</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css">
<style>
.container { max-width:500px; margin:20px auto; background:white; padding:15px; border-radius:10px; }
button { padding:10px 15px; margin-top:10px; }
</style>
</head>
<body>

<div class="container">
<h2>Payment</h2>
<p id="info"></p>
<button id="pay-btn">Simulate Payment</button>
</div>

<script>
const API_BASE="https://kk-homestay-backend.onrender.com";
const params=new URLSearchParams(window.location.search);
const booking_id=params.get("booking_id");

async function loadBooking(){
  const res=await fetch(`${API_BASE}/bookings`);
  const data=await res.json();
  const b=data.find(x=>x.id==booking_id);
  if(!b){ alert("Booking not found"); return; }
  document.getElementById("info").textContent=`Booking for ${b.user} on ${b.date}. Amount: RM ${b.price||0}`;
}

document.getElementById("pay-btn").addEventListener("click", async ()=>{
  const res=await fetch(`${API_BASE}/bookings/${booking_id}/pay`,{method:"POST"});
  const data=await res.json();
  alert(data.message);
  if(data.success) window.location.href="index.html";
});

loadBooking();
</script>
</body>
</html>
